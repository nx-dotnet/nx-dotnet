"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[573],{1445:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var n=t(1085),s=t(2247);const i={},o="Swagger projects and targets",c={id:"core/guides/swagger",title:"Swagger projects and targets",description:"As of v1.11.0, nx-dotnet supports generating code-generated projects from your .NET webapi projects.",source:"@site/../../docs/core/guides/swagger.md",sourceDirName:"core/guides",slug:"/core/guides/swagger",permalink:"/core/guides/swagger",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Nx Incremental Builds",permalink:"/core/guides/incremental-builds"},next:{title:"@nx-dotnet/core:build",permalink:"/core/executors/build"}},a={},l=[{value:"How it works",id:"how-it-works",level:2},{value:"How to use it",id:"how-to-use-it",level:2},{value:"Customizations",id:"customizations",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.RP)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"swagger-projects-and-targets",children:"Swagger projects and targets"}),"\n",(0,n.jsxs)(r.p,{children:["As of v1.11.0, ",(0,n.jsx)(r.code,{children:"nx-dotnet"})," supports generating code-generated projects from your .NET webapi projects."]}),"\n",(0,n.jsx)(r.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,n.jsxs)(r.p,{children:["Newly generated projects (",(0,n.jsx)(r.code,{children:"@nx-dotnet/core:application"}),"/",(0,n.jsx)(r.code,{children:"@nx-dotnet/core:library"}),") can optionally create 2 swagger related libraries:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"libs/generated/{project}-swagger"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"libs/generated/{project}-types"})}),"\n"]}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["A ",(0,n.jsx)(r.code,{children:"swagger"})," target is added to the generated webapi project which leverages ",(0,n.jsx)(r.a,{href:"https://github.com/domaindrivendev/Swashbuckle.AspNetCore",children:"Swashbuckle.AspNetCore"})," to extract a ",(0,n.jsx)(r.code,{children:"swagger.json"})," spec file.","\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["The swagger.json file is output to the ",(0,n.jsx)(r.code,{children:"-swagger"})," project."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["The ",(0,n.jsx)(r.code,{children:"-types"})," project is created containing a typescript client for consuming the webapi","\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["A ",(0,n.jsx)(r.code,{children:"codegen"})," target is added to the webapi project to refresh this library"]}),"\n",(0,n.jsxs)(r.li,{children:["The typescript client can be produced in 2 flavors:","\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["Interfaces only - with ",(0,n.jsx)(r.code,{children:"useNxPluginOpenApi = false"})]}),"\n",(0,n.jsxs)(r.li,{children:["A full fetch based implementation - with ",(0,n.jsx)(r.code,{children:"useNxPluginOpenApi = true"}),". Note: Java 8 is a pre-requisite for running this plugin."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.li,{children:"Nx dependencies ensure that the project targets are properly rebuilt whenever changes are made to the webapi"}),"\n",(0,n.jsxs)(r.li,{children:["To manually refresh the generated client, use ",(0,n.jsx)(r.code,{children:"nx codegen {project}-types"})]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"how-to-use-it",children:"How to use it"}),"\n",(0,n.jsxs)(r.p,{children:["From your typescript projects, the generated library can be used via ",(0,n.jsx)(r.code,{children:"import '@MyWorkspace/MyTypesProject'"}),". Invoke it as you would any other imported code."]}),"\n",(0,n.jsx)(r.h2,{id:"customizations",children:"Customizations"}),"\n",(0,n.jsxs)(r.p,{children:['To change the generated client type (default is "typescript-fetch"), edit the options in the ',(0,n.jsx)(r.code,{children:"codegen"})," target."]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["For example, to use ",(0,n.jsx)(r.code,{children:"typescript-angular"})," to generate a complete angular service implementation","\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:'"targets": {\n  "codegen": {\n    "executor": "@trumbitta/nx-plugin-openapi:generate-api-lib-sources",\n    "options": {\n      "generator": "typescript-angular",\n      "sourceSpecPathOrUrl": "libs/generated/api-swagger/swagger.json"\n    },\n    "dependsOn": ["^swagger"]\n  }\n}\n'})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["Many other generators exist, see ",(0,n.jsx)(r.a,{href:"https://openapi-generator.tech/docs/generators/",children:"openapi-generator-tools"})]}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,s.RP)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},2247:(e,r,t)=>{t.d(r,{RP:()=>l});var n=t(4041);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){s(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,n,s=function(e,r){if(null==e)return{};var t,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(s[t]=e[t]);return s}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var a=n.createContext({}),l=function(e){var r=n.useContext(a),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},p=n.forwardRef((function(e,r){var t=e.components,s=e.mdxType,i=e.originalType,a=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=l(t),h=s,g=u["".concat(a,".").concat(h)]||u[h]||d[h]||i;return t?n.createElement(g,o(o({ref:r},p),{},{components:t})):n.createElement(g,o({ref:r},p))}));p.displayName="MDXCreateElement"}}]);